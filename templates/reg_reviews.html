<!DOCTYPE html>
<html>
  <head>
    <title>리뷰 작성하기</title>
    <link rel="stylesheet" href="../static/css/status-bar.css" />
    <link rel="stylesheet" href="../static/css/alt-header.css" />
    <link rel="stylesheet" href="../static/css/submit_btn.css" />
    <link rel="stylesheet" href="../static/css/star-rating.css" />
    <link rel="stylesheet" href="../static/css/screens/reg_reviews.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css"
    />
       <style>
      
      .star {
          cursor: pointer;
      }
           
             
      /* 노란색 별 아이콘 스타일 */
      .fas.fa-star, .far.fa-star {
          color: yellow;
      }
    </style>
  </head>
  <body>
    <!-- 상단 status-bar -->
    <div class="status-bar">
      <div class="status-bar__column">
        <span>No Service</span>
        <i class="fas fa-wifi"></i>
      </div>
      <div class="status-bar__column">
        <span>18:43</span>
      </div>
      <div class="status-bar__column">
        <span>100%</span>
        <i class="fas fa-battery-full fa-lg"></i>
        <i class="fas fa-bolt"></i>
      </div>
    </div>
    <!-- 상단 header -->
    <header class="alt-header">
      <div class="alt-header__column">
        <a href="#">
          <i class="fas fa-arrow-left fa-lg" style="color: black"></i>
        </a>
      </div>
      <div class="alt-header__column">
        <h1 class="alt-header__title">리뷰 작성하기</h1>
      </div>
    </header>
    <main>
      <form action="/reg_review" method="post" onsubmit="return validateForm()" enctype="multipart/form-data">
        <label for="productImage"></label>
        <input
          type="file"
          id="productImage"
          name="productImage"
          accept=".jpg, .png, .jpeg"
          onchange="checkFile()"
          required
        />
        <div id="imageWrapper" onclick="uploadImage()">
          <img id="defaultIcon" src="../static/assets/camera.svg" />
          <img id="imagePreview" />
        </div>
        <br />
        <div class="textContent">
          <label for="reviewTitle">리뷰 제목</label><br />
          <input
            type="text"
            id="reviewTitle"
            name="reviewTitle"
            required
          /><br /><br />

          <label for="productName">상품 이름</label><br />
          <!-- [TODO] 클릭한 카드에서 직접 가져오기 -->
          <input
            type="text"
            id="productName"
            name="productName"
            value="{{ name }}"
            required
          /><br /><br />

          <label for="reviewerId">리뷰자 아이디</label><br />
          <!-- [TODO] 로그인 정보에서 직접 가져오기 -->
          <input type="text" id="reviewerId" name="reviewerId" required />
          <hr />
            
       
          <div class="mb-4">
          <label for="rating">별점 등록</label><br />
          <input type="hidden" id="rating" name="rating" value="0">
            <div id="star-rating" class="flex">
                <i class="far fa-star star text-yellow-400 text-2xl"></i>
                <i class="far fa-star star text-yellow-400 text-2xl"></i>
                <i class="far fa-star star text-yellow-400 text-2xl"></i>
                <i class="far fa-star star text-yellow-400 text-2xl"></i>
                <i class="far fa-star star text-yellow-400 text-2xl"></i>
            </div>
            <p class="text-gray-600 text-sm mt-2">별점을 선택해주세요</p>
        </div>
            
            
          <br /><br />
          <label for="reviewText">리뷰 글</label><br />
          <textarea
            id="reviewText"
            name="reviewText"
            rows="12"
            cols="50"
            required
          ></textarea>
        </div>
        <input id="submitBtn" type="submit" value="등록하기" />
      </form>
    </main>
    <script>
      // 별점 관련 자바스크립트
      const stars = document.querySelectorAll('.star');
      let rating = 0;

      function resetStars() {
          stars.forEach(star => {
              star.classList.remove('fas');
              star.classList.add('far');
          });
      }

      function handleStarClick(index) {
          resetStars();
          for (let i = 0; i <= index; i++) {
              stars[i].classList.remove('far');
              stars[i].classList.add('fas');
          }
          rating = index + 1;
      }
        
    document.getElementById('rating').value = rating; 
}


      stars.forEach((star, index) => {
          star.addEventListener('click', () => handleStarClick(index));
      });
    </script>
    <script src="../static/js/reg_reviews.js"></script>
  </body>
</html>
